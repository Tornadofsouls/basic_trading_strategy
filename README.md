# basic_trading_strategy
Basic trading strategies and automation

-------
# installation settings
## Use pre-packaged docker
```shell
docker run  -it --rm \
  -v $(pwd)/vt_setting.json:/root/.vntrader/vt_setting.json \
  -v $(pwd)/system_config.py:/strategies/utils/system_configs.py \
  chenditc/ditrading:latest
```
- Configure the vt_settings.json in the running directory to use different databases. If not configured, a temporary sqlite database will be used, and it will be destroyed after docker stops. The configuration method refers to [the vnpy database configuration](https://www.bookstack.cn/read/vnpy-2.5-zh/87bfaf6600a70114.md)
- Configure system_config.py in the running directory to adjust other parameters, such as push configuration, callback, and Azure App Insight configuration. Configuration sample reference [sample_system_config.py](https://github.com/chenditc/basic_trading_strategy/blob/main/strategies/utils/sample_system_configs.py)

## Compile docker yourself
If you need to compile docker yourself, use Dockerfile to compile and run.。

# data preparation
Currently using
1. [tushare](https://tushare.pro/document/2)
2. [akshare](https://www.akshare.xyz/)

When the policy is executed, the data will be downloaded and updated automatically

# Backtest development
Start the development environment:
```shell
docker run  -it --rm \
  -e JUPYTER_TOKEN=xxxxxx \
  -v $(pwd)/vt_setting.json:/root/.vntrader/vt_setting.json \
  -v $(pwd):/strategies \
  -p 8888:8888 \
  chenditc/ditrading:latest
```

Mount the local directory to the startup directory of jupyter, and then test and debug in jupyter notebook. The access token of Jupyter notebook is the value corresponding to JUPYTER_TOKEN the environment variable.。

After trying several backtesting frameworks, I found that vnpy is relatively more flexible, and can flexibly switch multiple targets, which is suitable as a backtesting engine for multi-asset configuration. Currently using vnpy as the backtesting engine.

# Firm offer
Real disk operation:
```shell
docker run -d --rm \
  -v $(pwd)/vt_setting.json:/root/.vntrader/vt_setting.json \
  -v $(pwd)/system_config.py:/strategies/utils/system_configs.py
  chenditc/ditrading:latest \
  python3 /scripts/daily_strategy_run.py 
```

The strategy definitions that need to be run daily are stored in scripts [scripts/daily_strategy_run.py](scripts/daily_strategy_run.py) . 

At present, the real offer mainly relies on the transaction signal generated by the daily execution of the backtest to send and push, and the transaction is completed in the form of call auction before the opening of the next day. Currently set to:
1. At 10 o'clock in the morning, implement the new strategy of automatic trading of Hong Kong stocks.
2. Run the IF and IC basis rolling strategy every night at 8 o'clock.
3. At 10 o'clock in the morning, execute the new strategy of automatic trading of A shares.

--------
# policy directory

- [Stock Index Futures Basis Arbitrage](strategies/spread_rolling_bt.ipynb)
- [Hong Kong stocks are automatically updated](strategies/hk_ipo_strategy.ipynb)
- [spider web strategy](strategies/spider_back_testing.ipynb)


